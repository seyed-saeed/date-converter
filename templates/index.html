<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>تبدیل تاریخ شمسی، میلادی، قمری + اوقات شرعی آنلاین</title>
  <link rel="stylesheet" href="static/style.css">
</head>
<body>
  <div class="container">
    <h1>تبدیل تاریخ و اوقات شرعی</h1>

    <!-- فرم تبدیل تاریخ -->
    <form method="POST">
      <input type="hidden" name="action" value="convert">
      <div class="row">
        <label for="year">سال:</label>
        <select name="year" id="year">
          {% for y in years %}
            <option value="{{ y }}">{{ y }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="row">
        <label for="month">ماه:</label>
        <select name="month" id="month">
          {% for num, name in shamsi_months.items() %}
            <option value="{{ num }}">{{ name }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="row">
        <label for="day">روز:</label>
        <select name="day" id="day">
          {% for d in days %}
            <option value="{{ d }}">{{ d }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="buttons">
        <button type="submit">🔄 تبدیل</button>
      </div>
    </form>

    {% if result and result.action == "convert" %}
      <div class="result">
        {% if result.error %}
          <p class="error">{{ result.error }}</p>
        {% else %}
          <p>📅 تاریخ شمسی: <strong>{{ result.shamsi }}</strong></p>
          <p>📆 تاریخ میلادی: <strong>{{ result.miladi }}</strong></p>
          <p>🌙 تاریخ قمری: <strong>{{ result.hijri }}</strong></p>
          <p>🗓 روز هفته: <strong>{{ result.weekday }}</strong></p>
          <p>🪐 نماد ماه: <strong>{{ result.month_symbol }}</strong></p>
          <p>📆 تعداد روزهای گذشته: <strong>{{ result.age_days }}</strong> روز</p>
          <p>🎂 سن دقیق: <strong>{{ result.age }}</strong></p>
        {% endif %}
      </div>
    {% endif %}

    <!-- فرم امروز -->
    <form method="POST">
      <input type="hidden" name="action" value="today">
      <div class="buttons">
        <button type="submit">📅 امروز</button>
      </div>
    </form>

    {% if result and result.action == "today" %}
      <div class="result">
        {% if result.error %}
          <p class="error">{{ result.error }}</p>
        {% else %}
          <p>📌 {{ result.today_text }}</p>
          <p>🌙 تاریخ قمری: <strong>{{ result.hijri_today }}</strong></p>
        {% endif %}
      </div>
    {% endif %}

    <!-- دکمه نمایش فرم اوقات شرعی -->
    <div class="buttons">
      <button type="button" onclick="showPrayerForm()">🕌 اوقات شرعی</button>
    </div>

    <!-- فرم مخفی اوقات شرعی -->
    <form method="POST" id="prayer-form" class="hidden">
      <input type="hidden" name="action" value="prayer">
      <div class="row">
        <label for="city">نام شهر:</label>
        <input type="text" name="city" id="city" placeholder="مثلاً Mashhad">
      </div>
      <div class="buttons">
        <button type="submit">✅ تأیید</button>
      </div>
    </form>

    {% if result and result.action == "prayer" %}
      <div class="result">
        {% if result.error %}
          <p class="error">{{ result.error }}</p>
        {% else %}
          <h3>🕌 اوقات شرعی امروز در {{ result.city_name }}</h3>
          <p>اذان صبح: {{ result.prayer_times.Fajr }}</p>
          <p>طلوع آفتاب: {{ result.prayer_times.Sunrise }}</p>
          <p>اذان ظهر: {{ result.prayer_times.Dhuhr }}</p>
          <p>اذان عصر: {{ result.prayer_times.Asr }}</p>
          <p>اذان مغرب: {{ result.prayer_times.Maghrib }}</p>
          <p>اذان عشاء: {{ result.prayer_times.Isha }}</p>
        {% endif %}
      </div>
    {% endif %}
  </div>

  <script>
    function showPrayerForm() {
      document.getElementById("prayer-form").classList.remove("hidden");
    }
  </script>
</body>
</html>
