<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒØŒ Ù…ÛŒÙ„Ø§Ø¯ÛŒØŒ Ù‚Ù…Ø±ÛŒ + Ø§ÙˆÙ‚Ø§Øª Ø´Ø±Ø¹ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ†</title>
  <link rel="stylesheet" href="static/style.css">
</head>
<body>
  <div class="container">
    <h1>ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ® Ùˆ Ø§ÙˆÙ‚Ø§Øª Ø´Ø±Ø¹ÛŒ</h1>

    <!-- ÙØ±Ù… ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ® -->
    <form method="POST">
      <input type="hidden" name="action" value="convert">
      <div class="row">
        <label for="year">Ø³Ø§Ù„:</label>
        <select name="year" id="year">
          {% for y in years %}
            <option value="{{ y }}">{{ y }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="row">
        <label for="month">Ù…Ø§Ù‡:</label>
        <select name="month" id="month">
          {% for num, name in shamsi_months.items() %}
            <option value="{{ num }}">{{ name }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="row">
        <label for="day">Ø±ÙˆØ²:</label>
        <select name="day" id="day">
          {% for d in days %}
            <option value="{{ d }}">{{ d }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="buttons">
        <button type="submit">ğŸ”„ ØªØ¨Ø¯ÛŒÙ„</button>
      </div>
    </form>

    {% if result and result.action == "convert" %}
      <div class="result">
        {% if result.error %}
          <p class="error">{{ result.error }}</p>
        {% else %}
          <p>ğŸ“… ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ: <strong>{{ result.shamsi }}</strong></p>
          <p>ğŸ“† ØªØ§Ø±ÛŒØ® Ù…ÛŒÙ„Ø§Ø¯ÛŒ: <strong>{{ result.miladi }}</strong></p>
          <p>ğŸŒ™ ØªØ§Ø±ÛŒØ® Ù‚Ù…Ø±ÛŒ: <strong>{{ result.hijri }}</strong></p>
          <p>ğŸ—“ Ø±ÙˆØ² Ù‡ÙØªÙ‡: <strong>{{ result.weekday }}</strong></p>
          <p>ğŸª Ù†Ù…Ø§Ø¯ Ù…Ø§Ù‡: <strong>{{ result.month_symbol }}</strong></p>
          <p>ğŸ“† ØªØ¹Ø¯Ø§Ø¯ Ø±ÙˆØ²Ù‡Ø§ÛŒ Ú¯Ø°Ø´ØªÙ‡: <strong>{{ result.age_days }}</strong> Ø±ÙˆØ²</p>
          <p>ğŸ‚ Ø³Ù† Ø¯Ù‚ÛŒÙ‚: <strong>{{ result.age }}</strong></p>
        {% endif %}
      </div>
    {% endif %}

    <!-- ÙØ±Ù… Ø§Ù…Ø±ÙˆØ² -->
    <form method="POST">
      <input type="hidden" name="action" value="today">
      <div class="buttons">
        <button type="submit">ğŸ“… Ø§Ù…Ø±ÙˆØ²</button>
      </div>
    </form>

    {% if result and result.action == "today" %}
      <div class="result">
        {% if result.error %}
          <p class="error">{{ result.error }}</p>
        {% else %}
          <p>ğŸ“Œ {{ result.today_text }}</p>
          <p>ğŸŒ™ ØªØ§Ø±ÛŒØ® Ù‚Ù…Ø±ÛŒ: <strong>{{ result.hijri_today }}</strong></p>
        {% endif %}
      </div>
    {% endif %}

    <!-- Ø¯Ú©Ù…Ù‡ Ù†Ù…Ø§ÛŒØ´ ÙØ±Ù… Ø§ÙˆÙ‚Ø§Øª Ø´Ø±Ø¹ÛŒ -->
    <div class="buttons">
      <button type="button" onclick="showPrayerForm()">ğŸ•Œ Ø§ÙˆÙ‚Ø§Øª Ø´Ø±Ø¹ÛŒ</button>
    </div>

    <!-- ÙØ±Ù… Ù…Ø®ÙÛŒ Ø§ÙˆÙ‚Ø§Øª Ø´Ø±Ø¹ÛŒ -->
    <form method="POST" id="prayer-form" class="hidden">
      <input type="hidden" name="action" value="prayer">
      <div class="row">
        <label for="city">Ù†Ø§Ù… Ø´Ù‡Ø±:</label>
        <input type="text" name="city" id="city" placeholder="Ù…Ø«Ù„Ø§Ù‹ Mashhad">
      </div>
      <div class="buttons">
        <button type="submit">âœ… ØªØ£ÛŒÛŒØ¯</button>
      </div>
    </form>

    {% if result and result.action == "prayer" %}
      <div class="result">
        {% if result.error %}
          <p class="error">{{ result.error }}</p>
        {% else %}
          <h3>ğŸ•Œ Ø§ÙˆÙ‚Ø§Øª Ø´Ø±Ø¹ÛŒ Ø§Ù…Ø±ÙˆØ² Ø¯Ø± {{ result.city_name }}</h3>
          <p>Ø§Ø°Ø§Ù† ØµØ¨Ø­: {{ result.prayer_times.Fajr }}</p>
          <p>Ø·Ù„ÙˆØ¹ Ø¢ÙØªØ§Ø¨: {{ result.prayer_times.Sunrise }}</p>
          <p>Ø§Ø°Ø§Ù† Ø¸Ù‡Ø±: {{ result.prayer_times.Dhuhr }}</p>
          <p>Ø§Ø°Ø§Ù† Ø¹ØµØ±: {{ result.prayer_times.Asr }}</p>
          <p>Ø§Ø°Ø§Ù† Ù…ØºØ±Ø¨: {{ result.prayer_times.Maghrib }}</p>
          <p>Ø§Ø°Ø§Ù† Ø¹Ø´Ø§Ø¡: {{ result.prayer_times.Isha }}</p>
        {% endif %}
      </div>
    {% endif %}
  </div>

  <script>
    function showPrayerForm() {
      document.getElementById("prayer-form").classList.remove("hidden");
    }
  </script>
</body>
</html>
