<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>تبدیل تاریخ شمسی، میلادی، قمری + اوقات شرعی آنلاین</title>
  <link rel="stylesheet" href="static/style.css">
</head>
<body>
  <!-- اسپینر و نکات جذاب هنگام لود -->
  <div id="spinner" class="spinner-wrapper">
    <div class="spinner"></div>
    <p class="loading-text">در حال آماده‌سازی سایت، لطفاً صبور باشید... ☕</p>
    <ul class="tips-list">
      <li>📅 تبدیل تاریخ شمسی، میلادی، قمری فقط با یک کلیک</li>
      <li>🕌 دریافت اوقات شرعی دقیق برای هر شهر ایران</li>
      <li>🎂 محاسبه سن دقیق بر اساس تاریخ تولد</li>
      <li>🪐 نمایش نماد ماه تولد به سبک ایرانی</li>
      <li>📆 نمایش روز هفته به سه زبان: فارسی، انگلیسی، عربی</li>
      <li>🔄 تبدیل تاریخ شمسی به میلادی و بالعکس</li>
      <li>🌙 تبدیل تاریخ میلادی به قمری با دقت بالا</li>
      <li>📌 نمایش تاریخ امروز در سه تقویم مختلف</li>
      <li>🧠 معما: اگر کسی در ۱۳۶۵/۵/۲ به دنیا آمده باشد، چند سال دارد؟</li>
      <li>🧭 معما: اگر امروز جمعه باشد، ۱۰۰ روز بعد چه روزی خواهد بود؟</li>
      <li>📜 نکته: تاریخ قمری بر اساس رؤیت ماه محاسبه می‌شود</li>
      <li>📊 قابلیت محاسبه فاصله بین دو تاریخ در روز، ماه و سال</li>
      <li>🧮 تبدیل تاریخ تولد به سن دقیق با جزئیات</li>
      <li>📖 آموزش تقویم‌های مختلف در بخش راهنما</li>
      <li>🧩 معما: اگر تاریخ تولد کسی ۱۳۷۰/۱/۱ باشد، در سال ۱۴۰۵ چند ساله است؟</li>
      <li>🌐 پشتیبانی از شهرهای مختلف ایران برای اوقات شرعی</li>
      <li>📍 قابلیت ذخیره تاریخ‌های خاص برای مراجعات بعدی</li>
      <li>🕊 طراحی سبک و سریع برای موبایل و دسکتاپ</li>
      <li>🎨 رابط کاربری شیشه‌ای با فونت فارسی زیبا</li>
      <li>🧠 معما: اگر امروز ۴ مهر باشد، ۵۰ روز قبل چه تاریخی بوده؟</li>
      <li>📅 نمایش تاریخ تولد به سه فرمت مختلف</li>
      <li>🧠 معما: اگر کسی ۱۰ هزار روز زندگی کرده باشد، چند سالشه؟</li>
      <li>📌 نکته: تاریخ شمسی بر اساس تقویم جلالی محاسبه می‌شود</li>
      <li>🧠 معما: اگر امروز دوشنبه باشد، ۷ روز بعد چه روزی است؟</li>
      <li>📆 نکته: ماه‌های قمری ممکن است ۲۹ یا ۳۰ روزه باشند</li>
      <li>🧠 معما: اگر کسی در ۱۳۸۰/۱۲/۲۹ به دنیا آمده باشد، تولدش در سال کبیسه چه روزی می‌افتد؟</li>
      <li>📌 نکته: تقویم میلادی بر اساس گردش زمین به دور خورشید است</li>
      <li>🧠 معما: اگر امروز ۲۰ مهر باشد، ۱۰۰ روز بعد چه تاریخی خواهد بود؟</li>
      <li>📌 نکته: تقویم شمسی دقیق‌ترین تقویم جهان در محاسبه سال خورشیدی است</li>
    </ul>
  </div>

  <!-- فرم تبدیل تاریخ با گزینه‌های انتخاب نوع -->
  <div class="container">
    <h1>تبدیل تاریخ و اوقات شرعی</h1>

    <form method="POST">
      <input type="hidden" name="action" value="convert">
      <div class="row">
        <label>نوع تبدیل:</label>
        <div class="radio-group">
          <label><input type="radio" name="mode" value="shamsi" checked onchange="updateFields()"> شمسی → میلادی و قمری</label>
          <label><input type="radio" name="mode" value="miladi" onchange="updateFields()"> میلادی → شمسی و قمری</label>
          <label><input type="radio" name="mode" value="hijri" onchange="updateFields()"> قمری → شمسی و میلادی</label>
        </div>
      </div>

      <div class="row-horizontal" id="shamsi-fields">
        <select name="year">
          {% for y in years_shamsi %}
            <option value="{{ y }}">{{ y }}</option>
          {% endfor %}
        </select>
        <select name="month">
          {% for num, name in shamsi_months.items() %}
            <option value="{{ num }}">{{ name }}</option>
          {% endfor %}
        </select>
        <select name="day">
          {% for d in days %}
            <option value="{{ d }}">{{ d }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="row-horizontal hidden" id="miladi-fields">
        <select name="year_m">
          {% for y in years_miladi %}
            <option value="{{ y }}">{{ y }}</option>
          {% endfor %}
        </select>
        <select name="month_m">
          {% for num, name in miladi_months.items() %}
            <option value="{{ num }}">{{ name }}</option>
          {% endfor %}
        </select>
        <select name="day_m">
          {% for d in days %}
            <option value="{{ d }}">{{ d }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="row-horizontal hidden" id="hijri-fields">
        <select name="year_h">
          {% for y in years_hijri %}
            <option value="{{ y }}">{{ y }}</option>
          {% endfor %}
        </select>
        <select name="month_h">
          {% for num, name in hijri_months.items() %}
            <option value="{{ num }}">{{ name }}</option>
          {% endfor %}
        </select>
        <select name="day_h">
          {% for d in days %}
            <option value="{{ d }}">{{ d }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="buttons">
        <button type="submit">🔄 تبدیل</button>
      </div>
    </form>

    {% if result and result.action == "convert" %}
      <div class="result">
        {% if result.error %}
          <p class="error">{{ result.error }}</p>
        {% else %}
          {% if result.shamsi %}<p>📅 تاریخ شمسی: <strong>{{ result.shamsi }}</strong></p>{% endif %}
          {% if result.miladi %}<p>📆 تاریخ میلادی: <strong>{{ result.miladi }}</strong></p>{% endif %}
          {% if result.hijri %}<p>🌙 تاریخ قمری: <strong>{{ result.hijri }}</strong></p>{% endif %}
          {% if result.weekday %}<p>🗓 روز هفته: <strong>{{ result.weekday }}</strong></p>{% endif %}
          {% if result.age_days %}<p>📆 تعداد روزهای گذشته: <strong>{{ result.age_days }}</strong> روز</p>{% endif %}
          {% if result.age %}<p>🎂 سن دقیق: <strong>{{ result.age }}</strong></p>{% endif %}
          {% if result.month_symbol %}<p>🪐 نماد ماه شمسی: <strong>{{ result.month_symbol }}</strong></p>{% endif %}
          {% if result.hijri_symbol %}<p>🌙 نماد ماه قمری: <strong>{{ result.hijri_symbol }}</strong></p>{% endif %}
          {% if result.miladi_zodiac %}<p>♉ Zodiac Sign: <strong>{{ result.miladi_zodiac }}</strong></p>{% endif %}
        {% endif %}
      </div>
    {% endif %}

    <!-- فرم امروز -->
    <form method="POST">
      <input type="hidden" name="action" value="today">
      <div class="buttons">
        <button type="submit">📅 امروز</button>
      </div>
    </form>

    {% if result and result.action == "today" %}
      <div class="result">
        {% if result.error %}
          <p class="error">{{ result.error }}</p>
        {% else %}
          <p>📌 {{ result.today_text }}</p>
                    <p>🌙 تاریخ قمری: <strong>{{ result.hijri_today }}</strong></p>
        {% endif %}
      </div>
    {% endif %}

    <!-- دکمه نمایش فرم اوقات شرعی -->
    <div class="buttons">
      <button type="button" onclick="showPrayerForm()">🕌 اوقات شرعی</button>
    </div>

    <!-- فرم مخفی اوقات شرعی -->
    <div id="prayer-wrapper" class="hidden">
      <form method="POST" id="prayer-form">
        <input type="hidden" name="action" value="prayer">
        <div class="row">
          <label for="city">نام شهر:</label>
          <input type="text" name="city" id="city" placeholder="مثلاً Mashhad">
        </div>
        <div class="buttons">
          <button type="submit">✅ تأیید</button>
        </div>
      </form>
    </div>

    {% if result and result.action == "prayer" %}
      <div class="result">
        {% if result.error %}
          <p class="error">{{ result.error }}</p>
        {% else %}
          <h3>🕌 اوقات شرعی امروز در {{ result.city_name }}</h3>
          <p>اذان صبح: {{ result.prayer_times.Fajr }}</p>
          <p>طلوع آفتاب: {{ result.prayer_times.Sunrise }}</p>
          <p>اذان ظهر: {{ result.prayer_times.Dhuhr }}</p>
          <p>اذان عصر: {{ result.prayer_times.Asr }}</p>
          <p>اذان مغرب: {{ result.prayer_times.Maghrib }}</p>
          <p>اذان عشاء: {{ result.prayer_times.Isha }}</p>
        {% endif %}
      </div>
    {% endif %}
  </div>

  <script>
    function showPrayerForm() {
      document.getElementById("prayer-wrapper").classList.remove("hidden");
    }

    function updateFields() {
      const mode = document.querySelector('input[name="mode"]:checked').value;
      document.getElementById("shamsi-fields").classList.add("hidden");
      document.getElementById("miladi-fields").classList.add("hidden");
      document.getElementById("hijri-fields").classList.add("hidden");

      if (mode === "shamsi") {
        document.getElementById("shamsi-fields").classList.remove("hidden");
      } else if (mode === "miladi") {
        document.getElementById("miladi-fields").classList.remove("hidden");
      } else if (mode === "hijri") {
        document.getElementById("hijri-fields").classList.remove("hidden");
      }
    }

    window.addEventListener("load", function () {
      document.getElementById("spinner").style.display = "none";
      updateFields();
    });
  </script>
</body>
</html>
