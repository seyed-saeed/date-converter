<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒØŒ Ù…ÛŒÙ„Ø§Ø¯ÛŒØŒ Ù‚Ù…Ø±ÛŒ + Ø§ÙˆÙ‚Ø§Øª Ø´Ø±Ø¹ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ†</title>
  <link rel="stylesheet" href="static/style.css">
</head>
<body>
  <div id="spinner" class="spinner-wrapper">
    <div class="spinner"></div>
    <p class="loading-text">Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†ØªÙ‚Ø§Ù„ Ø³Ø§ÛŒØªØŒ Ù„Ø·ÙØ§Ù‹ ØµØ¨ÙˆØ± Ø¨Ø§Ø´ÛŒØ¯â€¦</p>
    <div class="tip-box">
      <p id="tip-text" class="tip-show">â³ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø³Ø±ÙˆØ± Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù… Ø§Ø³Øªâ€¦</p>
    </div>
  </div>

  <div class="container">
    <h1>ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ® Ùˆ Ø§ÙˆÙ‚Ø§Øª Ø´Ø±Ø¹ÛŒ</h1>

    <form method="POST">
      <input type="hidden" name="action" value="convert">
      <div class="row">
        <label>Ù†ÙˆØ¹ ØªØ¨Ø¯ÛŒÙ„:</label>
        <div class="radio-group">
          <label><input type="radio" name="mode" value="shamsi" checked onchange="updateFields()"> Ø´Ù…Ø³ÛŒ</label>
          <label><input type="radio" name="mode" value="miladi" onchange="updateFields()"> Ù…ÛŒÙ„Ø§Ø¯ÛŒ</label>
          <label><input type="radio" name="mode" value="hijri" onchange="updateFields()"> Ù‚Ù…Ø±ÛŒ</label>
        </div>
      </div>

      <div class="row-horizontal" id="shamsi-fields">
        <select name="year">
          {% for y in years_shamsi %}
            <option value="{{ y }}">{{ y }}</option>
          {% endfor %}
        </select>
        <select name="month">
          {% for num, name in shamsi_months.items() %}
            <option value="{{ num }}">{{ name }}</option>
          {% endfor %}
        </select>
        <select name="day">
          {% for d in days %}
            <option value="{{ d }}">{{ d }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="row-horizontal hidden" id="miladi-fields">
        <select name="year_m">
          {% for y in years_miladi %}
            <option value="{{ y }}">{{ y }}</option>
          {% endfor %}
        </select>
        <select name="month_m">
          {% for num, name in miladi_months.items() %}
            <option value="{{ num }}">{{ name }}</option>
          {% endfor %}
        </select>
        <select name="day_m">
          {% for d in days %}
            <option value="{{ d }}">{{ d }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="row-horizontal hidden" id="hijri-fields">
        <select name="year_h">
          {% for y in years_hijri %}
            <option value="{{ y }}">{{ y }}</option>
          {% endfor %}
        </select>
        <select name="month_h">
          {% for num, name in hijri_months.items() %}
            <option value="{{ num }}">{{ name }}</option>
          {% endfor %}
        </select>
        <select name="day_h">
          {% for d in days %}
            <option value="{{ d }}">{{ d }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="buttons">
        <button type="submit">ğŸ”„ ØªØ¨Ø¯ÛŒÙ„</button>
      </div>
    </form>

    {% if result and result.action == "convert" %}
      <div class="result">
        {% if result.error %}
          <p class="error">{{ result.error }}</p>
        {% else %}
          {% if result.shamsi %}<p>ğŸ“… ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ: <strong>{{ result.shamsi }}</strong></p>{% endif %}
          {% if result.miladi %}<p>ğŸ“† ØªØ§Ø±ÛŒØ® Ù…ÛŒÙ„Ø§Ø¯ÛŒ: <strong>{{ result.miladi }}</strong></p>{% endif %}
          {% if result.hijri %}<p>ğŸŒ™ ØªØ§Ø±ÛŒØ® Ù‚Ù…Ø±ÛŒ: <strong>{{ result.hijri }}</strong></p>{% endif %}
          {% if result.weekday %}<p>ğŸ—“ Ø±ÙˆØ² Ù‡ÙØªÙ‡: <strong>{{ result.weekday }}</strong></p>{% endif %}
          {% if result.age_days %}<p>ğŸ“† ØªØ¹Ø¯Ø§Ø¯ Ø±ÙˆØ²Ù‡Ø§ÛŒ Ú¯Ø°Ø´ØªÙ‡: <strong>{{ result.age_days }}</strong> Ø±ÙˆØ²</p>{% endif %}
          {% if result.age %}<p>ğŸ‚ Ø³Ù† Ø¯Ù‚ÛŒÙ‚: <strong>{{ result.age }}</strong></p>{% endif %}
          {% if result.month_symbol %}<p>ğŸª Ù†Ù…Ø§Ø¯ Ù…Ø§Ù‡ Ø´Ù…Ø³ÛŒ: <strong>{{ result.month_symbol }}</strong></p>{% endif %}
          {% if result.hijri_symbol %}<p>ğŸŒ™ Ù†Ù…Ø§Ø¯ Ù…Ø§Ù‡ Ù‚Ù…Ø±ÛŒ: <strong>{{ result.hijri_symbol }}</strong></p>{% endif %}
          {% if result.miladi_zodiac %}<p>â™‰ Zodiac Sign: <strong>{{ result.miladi_zodiac }}</strong></p>{% endif %}
        {% endif %}
      </div>
    {% endif %}

    <form method="POST">
      <input type="hidden" name="action" value="today">
      <div class="buttons">
        <button type="submit">ğŸ“… Ø§Ù…Ø±ÙˆØ²</button>
      </div>
    </form>

    {% if result and result.action == "today" %}
      <div class="result">
        {% if result.error %}
          <p class="error">{{ result.error }}</p>
        {% else %}
          <p>ğŸ“Œ {{ result.today_text }}</p>
          <p>ğŸŒ™ ØªØ§Ø±ÛŒØ® Ù‚Ù…Ø±ÛŒ: <strong>{{ result.hijri_today }}</strong></p>
        {% endif %}
      </div>
    {% endif %}

    <div class="buttons">
      <button type="button" onclick="showPrayerForm()">ğŸ•Œ Ø§ÙˆÙ‚Ø§Øª Ø´Ø±Ø¹ÛŒ</button>
    </div>

    <div id="prayer-wrapper" class="hidden">
      <form method="POST" id="prayer-form">
        <input type="hidden" name="action" value="prayer">
        <div class="row">
          <label for="city">Ù†Ø§Ù… Ø´Ù‡Ø±:</label>
          <input type="text" name="city" id="city" placeholder="Ù…Ø«Ù„Ø§Ù‹ Mashhad">
        </div>
        <div class="buttons">
          <button type="submit">âœ… ØªØ£ÛŒÛŒØ¯</button>
        </div>
      </form>
    </div>

    {% if result and result.action == "prayer" %}
      <div class="result">
        {% if result.error %}
          <p class="error">{{ result.error }}</p>
        {% else %}
          <h3>ğŸ•Œ Ø§ÙˆÙ‚Ø§Øª Ø´Ø±Ø¹ÛŒ Ø§Ù…Ø±ÙˆØ² Ø¯Ø± {{ result.city_name }}</h3>
          <p>Ø§Ø°Ø§Ù† ØµØ¨Ø­: {{ result.prayer_times.Fajr }}</p>
          <p>Ø·Ù„ÙˆØ¹ Ø¢ÙØªØ§Ø¨: {{ result.prayer_times.Sunrise }}</p>
          <p>Ø§Ø°Ø§Ù† Ø¸Ù‡Ø±: {{ result.prayer_times.Dhuhr }}</p>
          <p>Ø§Ø°Ø§Ù† Ø¹ØµØ±: {{ result.prayer_times.Asr }}</p>
          <p>Ø§Ø°Ø§Ù† Ù…ØºØ±Ø¨: {{ result.prayer_times.Maghrib }}</p>
          <p>Ø§Ø°Ø§Ù† Ø¹Ø´Ø§Ø¡: {{ result.prayer_times.Isha }}</p>
        {% endif %}
      </div>
    {% endif %}
  </div>

<script>
  function showPrayerForm() {
    document.getElementById("prayer-wrapper").classList.remove("hidden");
  }

  function updateFields() {
    const mode = document.querySelector('input[name="mode"]:checked').value;
    document.getElementById("shamsi-fields").classList.add("hidden");
    document.getElementById("miladi-fields").classList.add("hidden");
    document.getElementById("hijri-fields").classList.add("hidden");

    if (mode === "shamsi") {
      document.getElementById("shamsi-fields").classList.remove("hidden");
    } else if (mode === "miladi") {
      document.getElementById("miladi-fields").classList.remove("hidden");
    } else if (mode === "hijri") {
      document.getElementById("hijri-fields").classList.remove("hidden");
    }
  }

  const tips = [
    "ğŸ“… ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒØŒ Ù…ÛŒÙ„Ø§Ø¯ÛŒØŒ Ù‚Ù…Ø±ÛŒ ÙÙ‚Ø· Ø¨Ø§ ÛŒÚ© Ú©Ù„ÛŒÚ©",
    "ğŸ•Œ Ø¯Ø±ÛŒØ§ÙØª Ø§ÙˆÙ‚Ø§Øª Ø´Ø±Ø¹ÛŒ Ø¯Ù‚ÛŒÙ‚ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø´Ù‡Ø± Ø§ÛŒØ±Ø§Ù†",
    "ğŸ‚ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø³Ù† Ø¯Ù‚ÛŒÙ‚ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ§Ø±ÛŒØ® ØªÙˆÙ„Ø¯",
    "ğŸª Ù†Ù…Ø§ÛŒØ´ Ù†Ù…Ø§Ø¯ Ù…Ø§Ù‡ ØªÙˆÙ„Ø¯ Ø¨Ù‡ Ø³Ø¨Ú© Ø§ÛŒØ±Ø§Ù†ÛŒØŒ Ø¹Ø±Ø¨ÛŒ Ùˆ ØºØ±Ø¨ÛŒ",
    "ğŸ“† Ù†Ù…Ø§ÛŒØ´ Ø±ÙˆØ² Ù‡ÙØªÙ‡ Ø¨Ù‡ Ø³Ù‡ Ø²Ø¨Ø§Ù†: ÙØ§Ø±Ø³ÛŒØŒ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒØŒ Ø¹Ø±Ø¨ÛŒ",
    "ğŸ§  Ù…Ø¹Ù…Ø§ÛŒ Ø±ÙˆØ²: Ø§Ú¯Ø± Ø§Ù…Ø±ÙˆØ² Ø¬Ù…Ø¹Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ûµ Ø±ÙˆØ² Ø¨Ø¹Ø¯ Ú†Ù‡ Ø±ÙˆØ²ÛŒâ€ŒØ³ØªØŸ",
    "ğŸ“œ ØªØ¨Ø¯ÛŒÙ„ ØªØ§Ø±ÛŒØ® Ø¨Ù‡ Ø­Ø±ÙˆÙ ÙØ§Ø±Ø³ÛŒ Ú©Ø§Ù…Ù„",
    "ğŸ•‹ Ù†Ù…Ø§ÛŒØ´ ØªØ§Ø±ÛŒØ® Ù‡Ø¬Ø±ÛŒ Ù‚Ù…Ø±ÛŒ Ø¨Ø§ Ù†Ù…Ø§Ø¯ Ø¹Ø±Ø¨ÛŒ",
    "ğŸ§­ Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ø´Ù‡Ø± Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡",
    "ğŸ§® Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙØ§ØµÙ„Ù‡ Ø¨ÛŒÙ† Ø¯Ùˆ ØªØ§Ø±ÛŒØ®",
    "ğŸ§˜ Ù†Ù…Ø§ÛŒØ´ Ù†Ù…Ø§Ø¯ Ù…Ø§Ù‡ ØªÙˆÙ„Ø¯ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø·Ø§Ù„Ø¹â€ŒØ¨ÛŒÙ†ÛŒ Ø§ÛŒØ±Ø§Ù†ÛŒ",
    "ğŸ§© Ù…Ø¹Ù…Ø§: Ø§Ú¯Ø± Û³ Ø±ÙˆØ² Ù‚Ø¨Ù„ Ø¯ÛŒØ±ÙˆØ²ØŒ Ø´Ù†Ø¨Ù‡ Ø¨ÙˆØ¯Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ø§Ù…Ø±ÙˆØ² Ú†Ù‡ Ø±ÙˆØ²ÛŒâ€ŒØ³ØªØŸ",
    "ğŸ“ˆ Ù†Ù…Ø§ÛŒØ´ Ø±ÙˆÙ†Ø¯ ØªØºÛŒÛŒØ± ØªØ§Ø±ÛŒØ® Ø¯Ø± ØªÙ‚ÙˆÛŒÙ…â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù",
    "ğŸ•°ï¸ ØªØ¨Ø¯ÛŒÙ„ Ø³Ø§Ø¹Øª Ø¬Ù‡Ø§Ù†ÛŒ Ø¨Ù‡ Ø³Ø§Ø¹Øª Ø§ÛŒØ±Ø§Ù†",
    "ğŸ§  Ù…Ø¹Ù…Ø§: Ø§Ú¯Ø± ÙØ±Ø¯Ø§ Ø¯ÛŒØ±ÙˆØ²Ù Ù¾Ø³â€ŒÙØ±Ø¯Ø§ Ø¨Ø§Ø´Ø¯ØŒ Ø§Ù…Ø±ÙˆØ² Ú†Ù‡ Ø±ÙˆØ²ÛŒâ€ŒØ³ØªØŸ",
    "ğŸ“– Ù†Ù…Ø§ÛŒØ´ Ù…Ù†Ø§Ø³Ø¨Øªâ€ŒÙ‡Ø§ÛŒ Ø±ÙˆØ² Ø¯Ø± ØªÙ‚ÙˆÛŒÙ… Ø±Ø³Ù…ÛŒ",
    "ğŸ§  Ù…Ø¹Ù…Ø§: Ø§Ú¯Ø± Ø§Ù…Ø±ÙˆØ² Ø¯ÙˆØ´Ù†Ø¨Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Û±Û° Ø±ÙˆØ² Ù‚Ø¨Ù„ Ú†Ù‡ Ø±ÙˆØ²ÛŒ Ø¨ÙˆØ¯Ù‡ØŸ",
    "ğŸ§  Ù…Ø¹Ù…Ø§: Ø§Ú¯Ø± Ø¯ÛŒØ±ÙˆØ² ÙØ±Ø¯Ø§ Ø¨Ø§Ø´Ø¯ØŒ Ø§Ù…Ø±ÙˆØ² Ú†Ù‡ Ø±ÙˆØ²ÛŒâ€ŒØ³ØªØŸ",
    "ğŸ§  Ù…Ø¹Ù…Ø§: Ø§Ú¯Ø± Ø§Ù…Ø±ÙˆØ² Ø±ÙˆØ²ÛŒ Ù‚Ø¨Ù„ Ø§Ø² Ø¬Ù…Ø¹Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ú†Ù‡ Ø±ÙˆØ²ÛŒâ€ŒØ³ØªØŸ",
    "ğŸ§  Ù…Ø¹Ù…Ø§: Ø§Ú¯Ø± Û² Ø±ÙˆØ² Ø¨Ø¹Ø¯ Ø§Ø² ÙØ±Ø¯Ø§ØŒ Ø´Ù†Ø¨Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ø§Ù…Ø±ÙˆØ² Ú†Ù‡ Ø±ÙˆØ²ÛŒâ€ŒØ³ØªØŸ",
    "ğŸ§  Ù…Ø¹Ù…Ø§: Ø§Ú¯Ø± Ø¯ÛŒØ±ÙˆØ²ØŒ Ø±ÙˆØ²ÛŒ Ù‚Ø¨Ù„ Ø§Ø² Ù¾Ù†Ø¬â€ŒØ´Ù†Ø¨Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ø§Ù…Ø±ÙˆØ² Ú†Ù‡ Ø±ÙˆØ²ÛŒâ€ŒØ³ØªØŸ",
    "ğŸ§  Ù…Ø¹Ù…Ø§: Ø§Ú¯Ø± Ø§Ù…Ø±ÙˆØ² ÙˆØ³Ø· Ù‡ÙØªÙ‡ Ø¨Ø§Ø´Ø¯ØŒ Ú†Ù‡ Ø±ÙˆØ²ÛŒâ€ŒØ³ØªØŸ",
    "ğŸ§  Ù…Ø¹Ù…Ø§: Ø§Ú¯Ø± ÙØ±Ø¯Ø§ Ø±ÙˆØ²ÛŒ Ù‚Ø¨Ù„ Ø§Ø² Ø´Ù†Ø¨Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ø§Ù…Ø±ÙˆØ² Ú†Ù‡ Ø±ÙˆØ²ÛŒâ€ŒØ³ØªØŸ",
    "ğŸ§  Ù…Ø¹Ù…Ø§: Ø§Ú¯Ø± Ø§Ù…Ø±ÙˆØ² Ø±ÙˆØ²ÛŒ Ø¨Ø¹Ø¯ Ø§Ø² Ø³Ù‡â€ŒØ´Ù†Ø¨Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ú†Ù‡ Ø±ÙˆØ²ÛŒâ€ŒØ³ØªØŸ",
    "ğŸ§  Ù…Ø¹Ù…Ø§: Ø§Ú¯Ø± Ø¯ÛŒØ±ÙˆØ² Ø±ÙˆØ²ÛŒ Ù‚Ø¨Ù„ Ø§Ø² ÛŒÚ©Ø´Ù†Ø¨Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ø§Ù…Ø±ÙˆØ² Ú†Ù‡ Ø±ÙˆØ²ÛŒâ€ŒØ³ØªØŸ",
    "ğŸ§  Ù…Ø¹Ù…Ø§: Ø§Ú¯Ø± Ø§Ù…Ø±ÙˆØ² Ø±ÙˆØ²ÛŒ Ù‚Ø¨Ù„ Ø§Ø² ÙØ±Ø¯Ø§ Ø¨Ø§Ø´Ø¯ØŒ Ú†Ù‡ Ø±ÙˆØ²ÛŒâ€ŒØ³ØªØŸ",
    "ğŸ§  Ù…Ø¹Ù…Ø§: Ø§Ú¯Ø± Ø§Ù…Ø±ÙˆØ² Ø±ÙˆØ²ÛŒ Ø¨Ø¹Ø¯ Ø§Ø² Ø¯ÛŒØ±ÙˆØ² Ø¨Ø§Ø´Ø¯ØŒ Ú†Ù‡ Ø±ÙˆØ²ÛŒâ€ŒØ³ØªØŸ",
    "ğŸ§  Ù…Ø¹Ù…Ø§: Ø§Ú¯Ø± Ø§Ù…Ø±ÙˆØ² Ø±ÙˆØ²ÛŒ Ø¨ÛŒÙ† Ø´Ù†Ø¨Ù‡ Ùˆ Ø¯ÙˆØ´Ù†Ø¨Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ú†Ù‡ Ø±ÙˆØ²ÛŒâ€ŒØ³ØªØŸ",
    "ğŸ§  Ù…Ø¹Ù…Ø§: Ø§Ú¯Ø± Ø§Ù…Ø±ÙˆØ² Ø±ÙˆØ²ÛŒ Ù‚Ø¨Ù„ Ø§Ø² Ø±ÙˆØ²ÛŒ Ù‚Ø¨Ù„ Ø§Ø² Ø¬Ù…Ø¹Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ú†Ù‡ Ø±ÙˆØ²ÛŒâ€ŒØ³ØªØŸ"
  ];

  let shuffledTips = [];
  let currentIndex = 0;
  const tipText = document.getElementById("tip-text");

  function shuffleTips() {
    shuffledTips = [...tips];
    for (let i = shuffledTips.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [shuffledTips[i], shuffledTips[j]] = [shuffledTips[j], shuffledTips[i]];
    }
    currentIndex = 0;
  }

  function showNextTip() {
    tipText.classList.remove("tip-show");
    tipText.classList.add("tip-fade");

    setTimeout(() => {
      if (currentIndex >= shuffledTips.length) {
        shuffleTips();
      }
      tipText.textContent = shuffledTips[currentIndex];
      currentIndex++;
      tipText.classList.remove("tip-fade");
      tipText.classList.add("tip-show");
    }, 1000);
  }

  shuffleTips();
  setInterval(showNextTip, 10000);

  window.addEventListener("load", function () {
    const spinner = document.getElementById("spinner");

    fetch("/status")
      .then(res => res.json())
      .then(data => {
        if (data.ready) {
          spinner.style.display = "none";
          updateFields();
        } else {
          setTimeout(() => {
            spinner.style.display = "none";
            updateFields();
          }, 60000);
        }
      })
      .catch(() => {
        setTimeout(() => {
          spinner.style.display = "none";
          updateFields();
        }, 60000);
      });
  });
</script>
</body>
</html>
